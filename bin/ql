#!/bin/bash
#
# Quick Look from the command line
export ql_pid
qlmanage -p "$@" > /dev/null 2>&1&
ql_pid=$!
# There is a race condition here as the user may hit
# Ctrl C before the trap call.
# Need to turning echo back on as well
# as read -s turns it off.
trap "stty echo ; kill $ql_pid ; exit 1 " INT

# Stop treating space as a white-space
IFS="_"
read -sn 1 resp
while [ "$resp" != " " ]; do
read -sn 1 resp
done
kill $ql_pid

# Clean-up the trap
trap - INT
